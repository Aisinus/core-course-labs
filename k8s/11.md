Firstly create secret. In my example ```password = my-password```

```bash
kubectl create secret generic my-secret --from-literal=password=my-password
secret/my-secret created
```
Verify the secret:
```bash
kubectl get secret my-secret
NAME        TYPE     DATA   AGE
my-secret   Opaque   1      92s
```

```bash
kubectl describe secret my-secret
Name:         my-secret
Namespace:    default
Labels:       <none>
Annotations:  <none>

Type:  Opaque

Data
====
password:  11 bytes
```

Encoded secret data:
```bash
kubectl get secret my-secret -o jsonpath="{.data.password}" | base64 --decode
my-password
```

Helm secret managment:
```bash
kubectl get po
NAME                          READY   STATUS    RESTARTS   AGE
app-python-65f6574ccb-r9sdr   1/1     Running   0          31s
```

```bash
kubectl exec app-python-65f6574ccb-r9sdr -- printenv | grep "PASSWORD"
PASSWORD=SOMEPASSWORD
```

```bash
myuser@app-python-6b848d49c6-bsqfm:/var/run/secrets$ df -h
Filesystem      Size  Used Avail Use% Mounted on
overlay          59G   19G   37G  34% /
tmpfs            64M     0   64M   0% /dev
/dev/vda1        59G   19G   37G  34% /etc/hosts
shm              64M     0   64M   0% /dev/shm
tmpfs           7.6G   12K  7.6G   1% /run/secrets/kubernetes.io/serviceaccount
tmpfs           3.9G     0  3.9G   0% /sys/firmware
myuser@app-python-6b848d49c6-bsqfm:/var/run/secrets$
```


### Update:

```bash
helm repo add hashicorp https://helm.releases.hashicorp.com
"hashicorp" already exists with the same configuration, skipping

helm repo update
Hang tight while we grab the latest from your chart repositories...
...Successfully got an update from the "hashicorp" chart repository
Update Complete. ⎈Happy Helming!⎈

helm install vault hashicorp/vault --set "server.dev.enabled=true"
NAME: vault
LAST DEPLOYED: Sat Dec  9 12:36:32 2023
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
Thank you for installing HashiCorp Vault!

Now that you have deployed Vault, you should look over the docs on using
Vault with Kubernetes available here:

https://developer.hashicorp.com/vault/docs


Your release is named vault. To learn more about the release, try:

  $ helm status vault
  $ helm get manifest vault

  kubectl get pod
NAME                                    READY   STATUS    RESTARTS   AGE
vault-0                                 1/1     Running   0          11s
vault-agent-injector-66f6f958b6-5hdzw   1/1     Running   0          11s

kubectl exec -it vault-0 -- /bin/sh
/ $ vault auth enable kubernetes
Success! Enabled kubernetes auth method at: kubernetes/
/ $ vault write auth/kubernetes/config \
> kubernvault write auth/kubernetes/config \
>       kubernetes_host="https://$KUBERNETES_PORT_443_TCP_ADDR:443"
Failed to parse K=V data: invalid key/value pair "kubernvault": format must be key=value
/ $ vault write auth/kubernetes/config \
>       kubernetes_host="https://$KUBERNETES_PORT_443_TCP_ADDR:443"
Success! Data written to: auth/kubernetes/config
/ $ vault policy write internal-app - <<EOF
> path "internal/data/database/config" {
>    capabilities = ["read"]
> }
> EOF
Success! Uploaded policy: internal-app
/ $ vault write auth/kubernetes/role/internal-app \
>       bound_service_account_names=internal-app \
>       bound_service_account_namespaces=default \
>       policies=internal-app \
>       ttl=24h
Success! Data written to: auth/kubernetes/role/internal-app
/ $ exit

kubectl create sa internal-app
serviceaccount/internal-app created

kubectl get serviceaccounts
NAME                   SECRETS   AGE
default                0         283d
internal-app           0         12s
just-service           0         17d
vault                  0         5m5s
vault-agent-injector   0         5m5s

helm install app-python app-python
NAME: app-python
LAST DEPLOYED: Sat Dec  9 12:58:21 2023
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
1. Get the application URL by running these commands:
  export NODE_PORT=$(kubectl get --namespace default -o jsonpath="{.spec.ports[0].nodePort}" services app-python)
  export NODE_IP=$(kubectl get nodes --namespace default -o jsonpath="{.items[0].status.addresses[0].address}")
  echo http://$NODE_IP:$NODE_PORT



  helm upgrade --values app-python/values.yaml app-python app-python/
Release "app-python" has been upgraded. Happy Helming!
NAME: app-python
LAST DEPLOYED: Sat Dec  9 13:05:52 2023
NAMESPACE: default
STATUS: deployed
REVISION: 2
NOTES:
1. Get the application URL by running these commands:
  export NODE_PORT=$(kubectl get --namespace default -o jsonpath="{.spec.ports[0].nodePort}" services app-python)
  export NODE_IP=$(kubectl get nodes --namespace default -o jsonpath="{.items[0].status.addresses[0].address}")
  echo http://$NODE_IP:$NODE_PORT
```

